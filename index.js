(()=>{"use strict";class t{static projection(t,o,e){return[2/t,0,0,0,0,-2/o,0,0,0,0,2/e,0,-1,1,0,1]}static perspective(t,o,e,n){const i=Math.tan(.5*Math.PI-.5*t),r=1/(e-n);return[i/o,0,0,0,0,i,0,0,0,0,(e+n)*r,-1,0,0,e*n*r*2,0]}static multiply(t,o){const e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],a=t[5],c=t[6],l=t[7],u=t[8],h=t[9],p=t[10],x=t[11],d=t[12],v=t[13],b=t[14],y=t[15],m=o[0],f=o[1],g=o[2],z=o[3],_=o[4],C=o[5],R=o[6],S=o[7],w=o[8],E=o[9],M=o[10],P=o[11],F=o[12],A=o[13],k=o[14],L=o[15];return[m*e+f*s+g*u+z*d,m*n+f*a+g*h+z*v,m*i+f*c+g*p+z*b,m*r+f*l+g*x+z*y,_*e+C*s+R*u+S*d,_*n+C*a+R*h+S*v,_*i+C*c+R*p+S*b,_*r+C*l+R*x+S*y,w*e+E*s+M*u+P*d,w*n+E*a+M*h+P*v,w*i+E*c+M*p+P*b,w*r+E*l+M*x+P*y,F*e+A*s+k*u+L*d,F*n+A*a+k*h+L*v,F*i+A*c+k*p+L*b,F*r+A*l+k*x+L*y]}static inverse(t){const o=t[0],e=t[1],n=t[2],i=t[3],r=t[4],s=t[5],a=t[6],c=t[7],l=t[8],u=t[9],h=t[10],p=t[11],x=t[12],d=t[13],v=t[14],b=t[15],y=h*b,m=v*p,f=a*b,g=v*c,z=a*p,_=h*c,C=n*b,R=v*i,S=n*p,w=h*i,E=n*c,M=a*i,P=l*d,F=x*u,A=r*d,k=x*s,L=r*u,$=l*s,O=o*d,N=x*e,D=o*u,T=l*e,j=o*s,B=r*e,q=y*s+g*u+z*d-(m*s+f*u+_*d),I=m*e+C*u+w*d-(y*e+R*u+S*d),U=f*e+R*s+E*d-(g*e+C*s+M*d),V=_*e+S*s+M*u-(z*e+w*s+E*u),G=1/(o*q+r*I+l*U+x*V);return[G*q,G*I,G*U,G*V,G*(m*r+f*l+_*x-(y*r+g*l+z*x)),G*(y*o+R*l+S*x-(m*o+C*l+w*x)),G*(g*o+C*r+M*x-(f*o+R*r+E*x)),G*(z*o+w*r+E*l-(_*o+S*r+M*l)),G*(P*c+k*p+L*b-(F*c+A*p+$*b)),G*(F*i+O*p+T*b-(P*i+N*p+D*b)),G*(A*i+N*c+j*b-(k*i+O*c+B*b)),G*($*i+D*c+B*p-(L*i+T*c+j*p)),G*(A*h+$*v+F*a-(L*v+P*a+k*h)),G*(D*v+P*n+N*h-(O*h+T*v+F*n)),G*(O*a+B*v+k*n-(j*v+A*n+N*a)),G*(j*h+L*n+T*a-(D*a+B*h+$*n))]}static translation(t,o,e){return[1,0,0,0,0,1,0,0,0,0,1,0,t,o,e,1]}static xRotation(t){const o=Math.cos(t),e=Math.sin(t);return[1,0,0,0,0,o,e,0,0,-e,o,0,0,0,0,1]}static yRotation(t){const o=Math.cos(t),e=Math.sin(t);return[o,0,-e,0,0,1,0,0,e,0,o,0,0,0,0,1]}static zRotation(t){const o=Math.cos(t),e=Math.sin(t);return[o,e,0,0,-e,o,0,0,0,0,1,0,0,0,0,1]}static scaling(t,o,e){return[t,0,0,0,0,o,0,0,0,0,e,0,0,0,0,1]}static translate(o,e,n,i){return t.multiply(o,t.translation(e,n,i))}static xRotate(o,e){return t.multiply(o,t.xRotation(e))}static yRotate(o,e){return t.multiply(o,t.yRotation(e))}static zRotate(o,e){return t.multiply(o,t.zRotation(e))}static scale(o,e,n,i){return t.multiply(o,t.scaling(e,n,i))}static transformVector(t,o){let e=[];for(let n=0;n<4;++n){e[n]=0;for(let i=0;i<4;++i)e[n]+=o[i]*t[4*i+n]}return e}}const o=t,e=class{constructor(t,o){this.options={width:500,height:500,backgroundColor:[0,0,0,1]},this.$canvas=t,this.context=this.$canvas.getContext("webgl2"),this.options=Object.assign(Object.assign({},this.options),o),this.resizeCanvas(),this.clearCanvas()}renderTriangles(t,o,e,n){const{attributesData:i,verticesCount:r}=t,s=this.createProgram(this.createShader(WebGL2RenderingContext.VERTEX_SHADER,o),this.createShader(WebGL2RenderingContext.FRAGMENT_SHADER,e));this.context.useProgram(s);const a=this.context.getUniformLocation(s,"u_matrix");this.context.uniformMatrix4fv(a,!1,n),Object.keys(i).map((t=>{this.createBuffer(i[t].vertices);const o=this.context.getAttribLocation(s,t);this.context.vertexAttribPointer(o,i[t].vertexSize,this.context.FLOAT,!1,0,0),this.context.enableVertexAttribArray(o)})),this.context.drawArrays(this.context.TRIANGLES,0,r)}resizeCanvas(){const{width:t,height:o}=this.options;this.$canvas.width=t,this.$canvas.height=o,this.context.viewport(0,0,t,o)}clearCanvas(){this.context.clearColor(...this.options.backgroundColor),this.context.clearDepth(1),this.context.enable(this.context.DEPTH_TEST),this.context.depthFunc(this.context.LEQUAL),this.context.clear(this.context.COLOR_BUFFER_BIT|this.context.DEPTH_BUFFER_BIT)}createShader(t,o){const e=this.context.createShader(t);return this.context.shaderSource(e,o),this.context.compileShader(e),this.context.getShaderParameter(e,this.context.COMPILE_STATUS)?e:(console.log(this.context.getShaderInfoLog(e)),this.context.deleteShader(e),null)}createProgram(t,o){const e=this.context.createProgram();return this.context.attachShader(e,t),this.context.attachShader(e,o),this.context.linkProgram(e),this.context.getProgramParameter(e,this.context.LINK_STATUS)?e:(console.log(this.context.getProgramInfoLog(e)),this.context.deleteProgram(e),null)}createBuffer(t){const o=this.context.createBuffer();return this.context.bindBuffer(this.context.ARRAY_BUFFER,o),this.context.bufferData(this.context.ARRAY_BUFFER,new Float32Array(t),this.context.STATIC_DRAW),o}};class n{}n.vertexShader="#version 300 es\nin vec4 a_position;\nin vec4 a_color;\n\nuniform mat4 u_matrix;\n\nout vec4 vertex_Color;\n\nvoid main() {\n  gl_Position = u_matrix * a_position;\n\n  vertex_Color = a_color;\n}\n  ",n.fragmentShader="#version 300 es\n  precision highp float;\n\n  in vec4 vertex_Color;\n  \n  out vec4 outColor;\n \n  void main() {\n    outColor = vertex_Color;\n  }\n";const i=n;function r(t){return t*Math.PI/180}function s(t){const e=o.translate(o.xRotation(Math.PI),-50,-75,-15);for(var n=0;n<t.length;n+=3){var i=o.transformVector(e,[t[n+0],t[n+1],t[n+2],1]);t[n+0]=i[0],t[n+1]=i[1],t[n+2]=i[2]}return t}function a(t,o){const[e,n]=t.reduce(((t,o)=>[[...t[0],...o.verticesPositions[0],...o.verticesPositions[1],...o.verticesPositions[2]],[...t[1],...o.color,...o.color,...o.color]]),[[],[]]);return{attributesData:{a_color:{vertices:n,vertexSize:4},a_position:{vertices:s(e),vertexSize:o}},verticesCount:e.length/o,position:t[0].position,rotation:t[0].rotation}}function c(t,o){const e=[[0,0,0],[0,100,0],[100,100,0],[100,0,0]];return a(t.reduce(((t,o)=>[...t,Object.assign(Object.assign({},o),{verticesPositions:(o.verticesPositions||e).slice(0,3)}),Object.assign(Object.assign({},o),{verticesPositions:[(o.verticesPositions||e)[0],...(o.verticesPositions||e).slice(2,4)]})]),[]),o)}function l(t,o){const{position:e,colors:n,rotation:i,size:r}=t,s=[[0,0,0],[0,r.y,0],[r.x,r.y,0],[r.x,0,0],[0,0,r.z],[0,r.y,r.z],[r.x,r.y,r.z],[r.x,0,r.z]];return[{position:[e[0],e[1],e[2]],verticesPositions:[s[0],s[3],s[7],s[4]],rotation:i,color:n[0]},{position:[e[0],e[1],e[2]],verticesPositions:[s[0],s[1],s[5],s[4]],rotation:i,color:n[1]},{position:[e[0],e[1],e[2]],verticesPositions:s.slice(0,4),rotation:i,color:n[2]},{position:[e[0],e[1],e[2]],verticesPositions:[s[3],s[2],s[6],s[7]],rotation:{x:i.x,y:i.y,z:i.z},color:n[3]},{position:[e[0],e[1],e[2]],verticesPositions:[s[1],s[2],s[6],s[5]],rotation:i,color:n[4]},{position:[e[0],e[1],e[2]],verticesPositions:s.slice(4,8),rotation:i,color:n[5]}].map((t=>c([t],o)))}const u={"2d":{Triangle:a,Quadrilateral:c},"3d":{Hexahedron:l,Cube:function(t,o){const{size:e}=t;return l(Object.assign(Object.assign({},t),{size:{x:e,y:e,z:e}}),o)}},render(t,e,n,i,s){const a=e=>{var a,c,l;t.renderTriangles(e,n,i,(a=s,c=e.position,l=e.rotation,a=o.translate(a,c[0],c[1],c[2]),a=o.xRotate(a,r(l.y)),a=o.yRotate(a,r(l.x)),o.zRotate(a,r(l.z))))};Array.isArray(e)?e.map(a):a(e)}};class h{constructor(t){this.$container=document.querySelector(`#${t}`)}render(){this.$container.innerHTML=`\n  <h1>Rubik's Cube</h1>\n  \n  <canvas id="scene"></canvas>\n\n  <p>\n    FaceMap\n    <pre id="test"></pre>\n  </p>\n  \n  <div id="controls">\n    <button class="scramble-controls">Scramble</button>\n\n    <p>Rotate:</p>\n    <div class="rotation-controls">\n      <div>\n        <button class="rotation-controls__button rotation-controls__button--up-left">&#9700;</button>\n        <button class="rotation-controls__button rotation-controls__button--up">&#9650;</button>\n        <button class="rotation-controls__button rotation-controls__button--up-right">&#9701;</button>\n      </div>\n      <div>\n        <button class="rotation-controls__button rotation-controls__button--left">&#9664;</button>\n        <button class="rotation-controls__button rotation-controls__button--down">&#9660;</button>\n        <button class="rotation-controls__button rotation-controls__button--right">&#9654;</button>\n      </div>\n    </div>\n\n    <p>Move:</p>\n    <div class="move-controls">\n      <select class="move-controls__direction">\n        <option value="up">Up</option>\n        <option value="down">Down</option>\n        <option value="left">Left</option>\n        <option value="right">Right</option>\n      </select>\n      <div class="move-controls__position">\n        ${Array(3).fill(0).reduce(((t,o,e)=>t+`<button class="move-controls__position-button" position-index="${e}">${e+1}</button>`),"")}\n      </div>\n    </div>\n  <div>\n\n  <style>\n    #controls {\n      margin-top: 2rem;\n      font-size: 1.75rem;\n    }\n    .rotation-controls,\n    .move-controls {\n      display: flex;\n      flex-flow: column wrap;\n      align-content: center;\n      justify-content: center;\n      margin-left: auto;\n      margin-right: auto;\n      margin-top: 1rem;\n    }\n\n    .rotation-controls {\n      margin-bottom: 2rem;\n    }\n \n    .rotation-controls__button {\n      font-size: 1.5rem;\n    }\n\n    \n    .move-controls > * {\n      margin-bottom: 1rem;\n    }\n    .move-controls__position-button {\n      margin: 0.25rem;\n    }\n  </style>\n    `}}var p,x;!function(t){t[t.None=0]="None",t[t.Up=1]="Up",t[t.Left=2]="Left",t[t.Front=3]="Front",t[t.Right=4]="Right",t[t.Down=5]="Down",t[t.Back=6]="Back"}(p||(p={})),function(t){t[t.None=0]="None",t[t.White=1]="White",t[t.Orange=2]="Orange",t[t.Green=3]="Green",t[t.Red=4]="Red",t[t.Yellow=5]="Yellow",t[t.Blue=6]="Blue"}(x||(x={}));const d=class{constructor(){this._rotationCount={x:0,y:0,z:0},this.position=[0,0,0],this.faceCount=6,this.faceSize=[3,3],this.faceMap=[[p.None,p.Up,p.None],[p.Left,p.Front,p.Right],[p.None,p.Down,p.None],[p.None,p.Back,p.None]],this.movableFacesPositions={x:[[1,0],[1,1],[1,2],[1,3]],y:[[0,1],[1,1],[2,1],[1,3]],z:[[0,1],[1,0],[2,1],[1,2]]},this.cubeData=Array(this.faceCount).fill(null).map(((t,o)=>Array(this.faceSize[1]).fill(0).map((()=>Array(this.faceSize[0]).fill(Object.keys(x)[o+1])))))}get rotation(){const{x:t,y:o,z:e}=this._rotationCount;return{x:90*t,y:90*o,z:90*e}}scramble(t){const o=()=>["x","y"][Math.floor(2*Math.random())],e=()=>Math.floor(3*Math.random()),n=()=>Math.floor(1*Math.random())?-1:1;Array(t).fill(0).map(((t,i)=>{i%3||this.rotateFaces(Object.assign({x:0,y:0,z:0},{[o()]:n()})),this.rotateCube({x:e(),y:e(),z:0},Object.assign({x:0,y:0,z:0},{[o()]:n}))})),0!==this._rotationCount.x&&Array(this._rotationCount.x).fill(0).map((()=>{this.rotateFaces({x:-1,y:0,z:0})})),0!==this._rotationCount.y&&Array(this._rotationCount.y).fill(0).map((()=>{this.rotateFaces({x:0,y:-1,z:0})}))}rotateFaces(t){this.updateFaceMap(t),this.updateRotation(t),this.updateCubeData(t)}rotateCube(t,o){Object.keys(o).map((e=>{if(!o[e])return;const n=this.movableFacesPositions[e].map((t=>this.faceMap[t[1]][t[0]]));let i,r=[],s=[];if(o.x)r=n.map((o=>this.cubeData[o-1].map(((o,e)=>[e,t.y])))),s=this.getNewCubeValues(n,r,0>o.x),i=(t,o)=>s[t[0]+3*o];else if(o.y){const e=this.faceMap[3][1];r=n.map((o=>e===o?this.cubeData[o-1].map(((o,e)=>[2-t.x,e])):this.cubeData[o-1].map(((o,e)=>[t.x,e])))),s=this.getNewCubeValues(n,r,0<o.y),i=(t,o)=>s[t[1]+3*o]}else o.z;n.map(((t,o)=>{r[o].map((e=>this.cubeData[t-1][e[1]][e[0]]=i(e,o)))}))}))}updateRotation(t){const{x:o,y:e,z:n}=this._rotationCount;this._rotationCount={x:o+(t.x||0),y:e+(t.y||0),z:n+(t.z||0)},Object.keys(this._rotationCount).map((t=>{const o=this._rotationCount[t];0>o?this._rotationCount[t]=3:3<o&&(this._rotationCount[t]=0)}))}updateFaceMap(t){Object.keys(t).map((o=>{const e=(()=>{switch(o){case"x":return"y";case"y":return"x";default:return o}})(),n=t[o];if(n){const t=this.getNewFaceMapValues(n,this.movableFacesPositions[e].map((t=>this.faceMap[t[1]][t[0]])));this.movableFacesPositions[e].map(((o,e)=>{this.faceMap[o[1]][o[0]]=t[e]}))}}))}updateCubeData(t){Object.keys(t).map((o=>{const e=t[o];if(!e)return;let n=null;n=0<e?(t,o,e)=>{t[o[0]][Math.abs(o[1]-2)]=e}:(t,o,e)=>{t[Math.abs(o[0]-2)][o[1]]=e},(()=>{switch(o){case"x":return[this.faceMap[0][1],this.faceMap[2][1]];case"y":return[this.faceMap[1][0],this.faceMap[1][2]];case"z":this.faceMap[1][1],this.faceMap[3][1]}})()}))}getNewFaceMapValues(t,o){return 0<t?(o.unshift(o[o.length-1]),o.pop()):0>t&&(o.push(o[0]),o.shift()),o}getNewCubeValues(t,o,e){let n=t.reduce(((t,e,n)=>[...t,...o[n].map((t=>this.cubeData[e-1][t[1]][t[0]]))]),[]);return n=e?[...n.slice(3,n.length),...n.slice(0,3)]:[...n.slice(n.length-3,n.length),...n.slice(0,n.length-3)],n}},v={width:600,height:400,pixelSize:100,spacing:10,backgroundColor:[.5,.5,.5,1]},b={radius:500,aspect:v.width/v.height,zNear:1,zFar:2e3,fieldOfView:r(70),angle:r(-22.5)},y={WHITE:[1,1,1,1],GREEN:[0,1,0,1],RED:[1,0,0,1],ORANGE:[1,.5,0,1],YELLOW:[1,1,0,1],BLUE:[0,.5,1,1]},m=class{constructor(t,o,e,n){this.$container=t,this.$rotationControls=o,this.$moveControls=e,this.$scrambleControls=n,this.setRotationEvents(),this.setMoveEvents(),this.setScrambleEvents()}setScrambleEvents(){this.$scrambleControls.addEventListener("click",(()=>{this.dispatchEvent("scramble",null)}))}setMoveEvents(){this.$moveControls.positions.map((t=>{t.addEventListener("click",(o=>{const e=this.$moveControls.direction.value,n=Number(t.getAttribute("position-index"));e&&!isNaN(n)&&this.dispatchEvent("move",{direction:e,positionIndex:n})}))}))}setRotationEvents(){Object.keys(this.$rotationControls).map((t=>{this.$rotationControls[t].addEventListener("click",(t=>{if(t.target)switch(t.target){case this.$rotationControls.up:this.dispatchEvent("rotate","up");break;case this.$rotationControls.left:this.dispatchEvent("rotate","left");break;case this.$rotationControls.right:this.dispatchEvent("rotate","right");break;case this.$rotationControls.down:this.dispatchEvent("rotate","down");break;case this.$rotationControls.upLeft:this.dispatchEvent("rotate","upLeft");break;case this.$rotationControls.upRight:this.dispatchEvent("rotate","upRight")}}))}))}dispatchEvent(t,o){const e=new CustomEvent(t,{detail:o});this.$container.dispatchEvent(e)}};window.addEventListener("DOMContentLoaded",(()=>{const t=new h("app-container");t.render();const n=t.$container.querySelector("#test"),r=t.$container.querySelector("#scene"),s=t.$container.querySelector("#controls"),a=new e(r,{width:v.width,height:v.height,backgroundColor:v.backgroundColor}),c=new m(s,{up:s.querySelector(".rotation-controls__button--up"),left:s.querySelector(".rotation-controls__button--left"),right:s.querySelector(".rotation-controls__button--right"),down:s.querySelector(".rotation-controls__button--down"),upLeft:s.querySelector(".rotation-controls__button--up-left"),upRight:s.querySelector(".rotation-controls__button--up-right")},{direction:s.querySelector(".move-controls__direction"),positions:Array(3).fill(0).map(((t,o)=>s.querySelector(`.move-controls__position-button[position-index="${o}"]`)))},s.querySelector(".scramble-controls"));let l=new d;const p=o.perspective(b.fieldOfView,b.aspect,b.zNear,b.zFar),x=o.inverse(o.translate(o.yRotation(b.angle),v.pixelSize/2,-v.pixelSize/2,1.5*b.radius)),f=o.multiply(p,x);let g=0;c.$container.addEventListener("rotate",(t=>{switch(t.detail||""){case"up":l.rotateFaces({x:0,y:1,z:0});break;case"left":l.rotateFaces({x:-1,y:0,z:0});break;case"right":l.rotateFaces({x:1,y:0,z:0});break;case"down":l.rotateFaces({x:0,y:-1,z:0});break;case"upLeft":l.rotateFaces({x:0,y:0,z:1});break;case"upRight":l.rotateFaces({x:0,y:0,z:-1})}})),c.$container.addEventListener("move",(t=>{if(!t.detail)return;const{direction:o,positionIndex:e}=t.detail;let n={x:0,y:0,z:0},i={x:0,y:0,z:0};switch(o){case"up":n.x=-1,i.y=e;break;case"left":n.y=1,i.x=e;break;case"right":n.y=-1,i.x=e;break;case"down":n.x=1,i.y=e}l.rotateCube(i,n)})),c.$container.addEventListener("scramble",(()=>{l.scramble(100)}));const z=()=>{if(g>0){a.clearCanvas();const t=function(t,o,e,n,i){const r=3*t+4*o;return[(s,a,c)=>{const l={x:-t+o,y:-o,z:0},h={x:l.x+c*(t+o)-o,y:l.y,z:l.z+r-(a*(t+o)+o)};return u["2d"].Quadrilateral([{position:e,verticesPositions:[[h.x,h.y,h.z],[h.x,h.y,h.z-t],[h.x+t,h.y,h.z-t],[h.x+t,h.y,h.z]],rotation:n,color:0===a&&0===c?[0,0,0,1]:i[0][s]}],3)},(s,a,c)=>{const l={x:-t-o,y:o,z:0},h={x:l.x,y:l.y+a*(t+o)-o,z:l.z+r-(c*(t+o)+o)};return u["2d"].Quadrilateral([{position:e,verticesPositions:[[h.x,h.y,h.z],[h.x,h.y,h.z-t],[h.x,h.y+t,h.z-t],[h.x,h.y+t,h.z]],rotation:n,color:0===a&&0===c?[0,0,0,1]:i[1][s]}],3)},(r,s,a)=>{const c={x:a*(t+o),y:s*(t+o),z:0};return u["2d"].Quadrilateral([{position:e,verticesPositions:[[c.x,c.y,c.z],[c.x-t,c.y,c.z],[c.x-t,c.y+t,c.z],[c.x,c.y+t,c.z]],rotation:n,color:0===s&&0===a?[0,0,0,1]:i[2][r]}],3)},(s,a,c)=>{const l={x:-t-o+r,y:o+a*(t+o)-o,z:t+o+r-((3-c)*(t+o)+o)};return u["2d"].Quadrilateral([{position:e,verticesPositions:[[l.x,l.y,l.z],[l.x,l.y,l.z-t],[l.x,l.y+t,l.z-t],[l.x,l.y+t,l.z]],rotation:n,color:0===a&&0===c?[0,0,0,1]:i[3][s]}],3)},(s,a,c)=>{const l={x:-t+o+c*(t+o)-o,y:0+r-o,z:t+o+r-((3-a)*(t+o)+o)};return u["2d"].Quadrilateral([{position:e,verticesPositions:[[l.x,l.y,l.z],[l.x,l.y,l.z-t],[l.x+t,l.y,l.z-t],[l.x+t,l.y,l.z]],rotation:n,color:0===a&&0===c?[0,0,0,1]:i[4][s]}],3)},(s,a,c)=>{const l={x:0+c*(t+o)-o,y:(3-a)*(t+o)-t-o,z:0+r};return u["2d"].Quadrilateral([{position:e,verticesPositions:[[l.x,l.y,l.z],[l.x-t,l.y,l.z],[l.x-t,l.y+t,l.z],[l.x,l.y+t,l.z]],rotation:n,color:0===a&&0===c?[0,0,0,1]:i[5][s]}],3)}].reduce(((t,o)=>[...t,...Array(9).fill(0).map(((t,e)=>o(e,e%3,Math.floor(e/3))))]),[])}(v.pixelSize,v.spacing,l.position,l.rotation,l.cubeData.map((t=>t.reduce(((t,o)=>[...t,...o.map((t=>Object.values(y)[Number(t)-1]))]),[]))));n.innerText=l.faceMap.reduce(((t,o)=>t+o.map((t=>Number(t)||" ")).join(" ")+"\n"),""),u.render(a,[...t],i.vertexShader,i.fragmentShader,f)}g=requestAnimationFrame(z)};requestAnimationFrame(z)}))})();